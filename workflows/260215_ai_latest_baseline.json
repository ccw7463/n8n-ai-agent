{
  "name": "Threads Auto Publisher - Workflow A (Daily Pipeline)",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 6
            }
          ]
        }
      },
      "id": "trigger-001",
      "name": "ì•„ì¹¨ 6ì‹œ íŠ¸ë¦¬ê±°",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [-2400, 300]
    },
    {
      "parameters": {
        "jsCode": "const feeds = [\n  // ì¢…í•© ë‰´ìŠ¤\n  'https://news.google.com/rss/search?q=artificial+intelligence+OR+LLM+OR+foundation+model&hl=en',\n  'https://news.google.com/rss/search?q=HyperCLOVA+OR+Upstage+OR+KoGPT+OR+EXAON+AI&hl=ko',\n  'https://techcrunch.com/category/artificial-intelligence/feed/',\n  'https://the-decoder.com/feed/',\n  'https://www.marktechpost.com/feed/',\n\n  // AI ê¸°ì—… ê³µì‹ ë¸”ë¡œê·¸ (ë¯¸êµ­/ìœ ëŸ½)\n  'https://openai.com/blog/rss.xml',\n  'https://www.anthropic.com/rss.xml',\n  'https://blog.google/rss',\n  'https://ai.meta.com/blog/rss/',\n  'https://mistral.ai/feed/rss',\n  'https://blogs.nvidia.com/feed/',\n  'https://stability.ai/blog/feed',\n\n  // ì¤‘êµ­ AI\n  'https://qwenlm.github.io/feed.xml',\n  'https://github.com/deepseek-ai.atom',\n  'https://github.com/MoonshotAI.atom',\n\n  // í•œêµ­ AI\n  'https://github.com/clovaai.atom',\n  'https://github.com/upstage.atom',\n\n  // ê°œë°œì ë„êµ¬/í”„ë ˆì„ì›Œí¬\n  'https://huggingface.co/blog/feed.xml',\n  'https://blog.langchain.dev/rss/',\n  'https://blog.llamaindex.ai/feed',\n\n  // ì»¤ë®¤ë‹ˆí‹°/íë ˆì´ì…˜\n  'https://buttondown.email/ainews/rss',\n  'https://www.deeplearning.ai/the-batch/feed/',\n  'https://simonwillison.net/atom/everything/',\n  'https://www.latent.space/feed',\n\n  // ë…¼ë¬¸\n  'https://rss.arxiv.org/rss/cs.AI',\n  'https://rss.arxiv.org/rss/cs.CL',\n\n  // ìë™í™” í”Œë«í¼\n  'https://blog.n8n.io/rss',\n  'https://zapier.com/blog/feeds/latest/',\n  'https://www.make.com/en/blog/feed',\n  'https://news.google.com/rss/search?q=n8n+OR+Zapier+OR+Make.com+OR+workflow+automation+OR+no-code+automation&hl=en',\n\n  // AI ì´ë¯¸ì§€/ë¹„ë””ì˜¤ ìƒì„±\n  'https://news.google.com/rss/search?q=Midjourney+OR+Kling+AI+OR+Hailuo+AI+OR+Higgsfield+OR+Runway+ML+OR+Sora&hl=en',\n\n  // AI ê²€ìƒ‰/ì—ì´ì „íŠ¸\n  'https://news.google.com/rss/search?q=Genspark+OR+Perplexity+AI+OR+AI+agent+launch&hl=en'\n];\n\nconst results = [];\n\nfor (const feedUrl of feeds) {\n  try {\n    const response = await this.helpers.httpRequest({\n      method: 'GET',\n      url: feedUrl,\n      headers: { 'User-Agent': 'n8n-news-agent/1.0' },\n      timeout: 10000,\n      returnFullResponse: true,\n      encoding: 'utf-8',\n      json: false\n    });\n\n    const text = typeof response === 'string' ? response : (response.body || '');\n    const items = text.match(/<item[\\s\\S]*?<\\/item>|<entry[\\s\\S]*?<\\/entry>/gi) || [];\n\n    for (const item of items.slice(0, 10)) {\n      const title = (item.match(/<title[^>]*>([\\s\\S]*?)<\\/title>/) || [])[1] || '';\n      const link = (item.match(/<link[^>]*>([\\s\\S]*?)<\\/link>/) || [])[1] ||\n                   (item.match(/<link[^>]*href=\"([^\"]*)\"/) || [])[1] || '';\n      const pubDate = (item.match(/<pubDate>([\\s\\S]*?)<\\/pubDate>|<published>([\\s\\S]*?)<\\/published>|<updated>([\\s\\S]*?)<\\/updated>/) || [])[1] || '';\n      const desc = (item.match(/<description[^>]*>([\\s\\S]*?)<\\/description>|<summary[^>]*>([\\s\\S]*?)<\\/summary>/) || [])[1] || '';\n\n      const cleanTitle = title.replace(/<!\\[CDATA\\[|\\]\\]>/g, '').replace(/<[^>]*>/g, '').trim();\n      const cleanDesc = desc.replace(/<!\\[CDATA\\[|\\]\\]>/g, '').replace(/<[^>]*>/g, '').trim();\n      const cleanLink = link.replace(/<!\\[CDATA\\[|\\]\\]>/g, '').replace(/<[^>]*>/g, '').trim();\n\n      if (cleanTitle) {\n        results.push({\n          json: {\n            title: cleanTitle,\n            link: cleanLink,\n            source: feedUrl.split('/')[2],\n            published: pubDate.replace(/<!\\[CDATA\\[|\\]\\]>/g, '').trim(),\n            snippet: cleanDesc.slice(0, 500)\n          }\n        });\n      }\n    }\n  } catch (e) {\n    continue;\n  }\n}\n\n// Tavily API ê²€ìƒ‰ ì¶”ê°€\nconst tavilyQueries = [\n  'new AI model release today',\n  'LLM framework tool update',\n  'AI demo launch new feature',\n  'Midjourney Kling Hailuo Runway AI video image update'\n];\n\nfor (const query of tavilyQueries) {\n  try {\n    const tavilyResponse = await this.helpers.httpRequest({\n      method: 'POST',\n      url: 'https://api.tavily.com/search',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        api_key: $env.TAVILY_API_KEY,\n        query: query,\n        days: 1,\n        max_results: 5\n      }),\n      timeout: 10000\n    });\n\n    const parsed = typeof tavilyResponse === 'string'\n      ? JSON.parse(tavilyResponse)\n      : tavilyResponse;\n\n    for (const item of (parsed.results || [])) {\n      results.push({\n        json: {\n          title: item.title || '',\n          link: item.url || '',\n          source: 'tavily',\n          published: '',\n          snippet: (item.content || '').slice(0, 500)\n        }\n      });\n    }\n  } catch (e) {\n    continue;\n  }\n}\n\nreturn results;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-2100, 300],
      "id": "rss-001",
      "name": "RSS + Tavily ìˆ˜ì§‘"
    },
    {
      "parameters": {
        "jsCode": "const allItems = $input.all();\nconst seen = new Set();\nconst filtered = [];\n\nfor (const item of allItems) {\n  const title = (item.json.title || '').trim();\n  const link = item.json.link || item.json.url || item.json.guid || '';\n  if (!title) continue;\n\n  const key = title.toLowerCase().replace(/[^a-z0-9ê°€-í£]/g, '').slice(0, 60);\n\n  if (seen.has(key)) continue;\n  seen.add(key);\n\n  // 24ì‹œê°„ ì´ë‚´ ê¸°ì‚¬ë§Œ\n  const pubDate = item.json.published || '';\n  if (pubDate) {\n    const articleDate = new Date(pubDate);\n    const now = new Date();\n    const hoursDiff = (now - articleDate) / (1000 * 60 * 60);\n    if (hoursDiff > 24) continue;\n  }\n\n  filtered.push({\n    json: {\n      title: title,\n      link: link,\n      source: item.json.source || 'unknown',\n      published: pubDate,\n      snippet: (item.json.snippet || '').slice(0, 500)\n    }\n  });\n}\n\nreturn filtered;"
      },
      "id": "dedup-001",
      "name": "ì¤‘ë³µì œê±° & 24h í•„í„°",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-1800, 300]
    },
    {
      "parameters": {
        "jsCode": "const articles = $input.all().map(item => item.json);\n\nconst articleList = articles.map((a, i) =>\n  `[${i+1}] ${a.title} (${a.source})\\n    Link: ${a.link}\\n    Snippet: ${a.snippet}`\n).join('\\n\\n');\n\nconst prompt = `ë‹¹ì‹ ì€ AI ë‰´ìŠ¤ í•„í„°ë§ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\nì•„ë˜ ê¸°ì‚¬ ëª©ë¡ì—ì„œ ê¸°ì¤€ì— ë§ëŠ” ê¸°ì‚¬ë¥¼ ì„ ë³„í•˜ì„¸ìš”.\n\n[í¬í•¨ ê¸°ì¤€]\n- ìƒˆë¡œìš´ AI ëª¨ë¸ ì¶œì‹œ/ë¦´ë¦¬ì¦ˆ\n- ìƒˆë¡œìš´ AI ë„êµ¬/ì„œë¹„ìŠ¤ ì¶œì‹œ ë° ì—…ë°ì´íŠ¸\n- ìƒˆë¡œìš´ ê¸°ìˆ  ë°ëª¨\n- API ë³€ê²½/ì‹ ê·œ ê³µê°œ\n- ì£¼ìš” ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ ë¦´ë¦¬ì¦ˆ\n- ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼, ì£¼ìš” ë…¼ë¬¸\n- AI ìƒì„± ë„êµ¬ ì—…ë°ì´íŠ¸ (í…ìŠ¤íŠ¸/ì´ë¯¸ì§€/ìŒì„±/ë¹„ë””ì˜¤)\n- ìë™í™” ë„êµ¬ (n8n, Make, Zapier) ì—…ë°ì´íŠ¸\n- ë°”ì´ë¸Œì½”ë”©, ë…¸ì½”ë“œ/ë¡œìš°ì½”ë“œ AI ê´€ë ¨ ì†Œì‹\n\n[ì œì™¸ ê¸°ì¤€]\n- ë²•/ê·œì œ/ì •ì±…, ì •ì¹˜\n- íˆ¬ì/í€ë”©/IPO, ì¸ì‚¬ì´ë™\n- ìœ¤ë¦¬/ì² í•™ì  ë…¼ì˜\n- ë‹¨ìˆœ ì‚°ì—… ì „ë§/ì˜ê²¬/ë§ˆì¼€íŒ…ì„± ê¸°ì‚¬\n\n[ì¤‘ë³µ ì œê±° ê·œì¹™ - ë§¤ìš° ì¤‘ìš”]\n- ê°™ì€ ì‚¬ê±´/ë°œí‘œ/ë¦´ë¦¬ì¦ˆë¥¼ ë‹¤ë£¨ëŠ” ê¸°ì‚¬ê°€ ì—¬ëŸ¬ ê°œë©´ ê°€ì¥ ì›ë³¸ì— ê°€ê¹Œìš´ ì†ŒìŠ¤ 1ê°œë§Œ ì„ íƒ\n- ìš°ì„ ìˆœìœ„: ê³µì‹ ë¸”ë¡œê·¸/ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ > ì „ë¬¸ AI ë§¤ì²´ > ì¼ë°˜ í…Œí¬ ë§¤ì²´ > ë‰´ìŠ¤ ë§¤ì²´\n- ì˜ˆ: OpenAI ë¸”ë¡œê·¸ vs TechCrunchê°€ ê°™ì€ ë‰´ìŠ¤ë¥¼ ë‹¤ë£¨ë©´ OpenAI ë¸”ë¡œê·¸ë§Œ ì„ íƒ\n\nê¸°ì‚¬ ëª©ë¡:\n${articleList}\n\në°˜ë“œì‹œ ì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”. JSON ì™¸ì˜ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”:\n{\n  \"selected\": [\n    { \"index\": 1, \"reason\": \"ì„ íƒ ì´ìœ  í•œ ì¤„\" }\n  ]\n}\n\nìµœëŒ€ 15ê°œê¹Œì§€ ì„ ë³„í•˜ì„¸ìš”. ì˜ë¯¸ì ìœ¼ë¡œ ì¤‘ë³µë˜ëŠ” ê¸°ì‚¬ëŠ” ë°˜ë“œì‹œ 1ê°œë§Œ ë‚¨ê¸°ì„¸ìš”.`;\n\nreturn [{ json: { prompt, articles } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-1500, 300],
      "id": "filter-prompt-001",
      "name": "1ì°¨ í•„í„° í”„ë¡¬í”„íŠ¸"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'openai/gpt-4.1-mini', messages: [{ role: 'system', content: 'AI ë‰´ìŠ¤ í•„í„°ë§ ì „ë¬¸ê°€. ë°˜ë“œì‹œ ìš”ì²­ëœ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ë¼. JSON ì™¸ì˜ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆë¼.' }, { role: 'user', content: $json.prompt }], temperature: 0.2, max_tokens: 2000 }) }}",
        "options": {
          "timeout": 60000
        }
      },
      "id": "llm-filter-001",
      "name": "1ì°¨ í•„í„° LLM (GPT-4.1-mini)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [-1200, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "cjRbZ8vwW17VCUpg",
          "name": "Openrouter"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const llmResponse = $input.first().json.choices?.[0]?.message?.content || '';\n\n// JSON íŒŒì‹±\nlet jsonStr = llmResponse;\nconst jsonMatch = llmResponse.match(/```json\\s*([\\s\\S]*?)\\s*```/);\nif (jsonMatch) jsonStr = jsonMatch[1];\nconst plainMatch = jsonStr.match(/```\\s*([\\s\\S]*?)\\s*```/);\nif (plainMatch) jsonStr = plainMatch[1];\n\nlet selected = [];\ntry {\n  const parsed = JSON.parse(jsonStr.trim());\n  selected = parsed.selected || [];\n} catch (e) {\n  // fallback: ìˆ«ì ì¶”ì¶œ\n  const matches = llmResponse.match(/\\d+/g) || [];\n  selected = matches.map(m => ({ index: parseInt(m, 10) }));\n}\n\n// ì›ë³¸ ê¸°ì‚¬ ë°°ì—´ ê°€ì ¸ì˜¤ê¸°\nconst articles = $('1ì°¨ í•„í„° í”„ë¡¬í”„íŠ¸').first().json.articles || [];\n\nconst results = [];\nfor (const item of selected) {\n  const idx = item.index - 1;\n  if (idx >= 0 && idx < articles.length) {\n    results.push({\n      json: {\n        ...articles[idx],\n        filter_reason: item.reason || ''\n      }\n    });\n  }\n}\n\nreturn results.length > 0\n  ? results.slice(0, 15)\n  : [{ json: { title: 'No articles selected', skip: true } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-900, 300],
      "id": "filter-parse-001",
      "name": "1ì°¨ í•„í„° ê²°ê³¼ íŒŒì‹±"
    },
    {
      "parameters": {
        "jsCode": "// ê° ê¸°ì‚¬ì— ëŒ€í•´ Perplexity ì¡°ì‚¬ìš© í”„ë¡¬í”„íŠ¸ ìƒì„±\nconst item = $input.first().json;\n\nif (item.skip) return [{ json: { skip: true } }];\n\nconst prompt = `ì•„ë˜ AI ê´€ë ¨ ê¸°ì‚¬ì— ëŒ€í•´ ì‹¬ì¸µ ì¡°ì‚¬ë¥¼ í•´ì£¼ì„¸ìš”.\n\nê¸°ì‚¬ ì œëª©: ${item.title}\nê¸°ì‚¬ ë§í¬: ${item.link}\nê¸°ì‚¬ ì¶œì²˜: ${item.source}\nê¸°ì‚¬ ìŠ¤ë‹ˆí«: ${item.snippet}\n\në‹¤ìŒì„ ì¡°ì‚¬í•´ì„œ ë°˜ë“œì‹œ JSONìœ¼ë¡œë§Œ ì‘ë‹µí•´ì£¼ì„¸ìš”:\n{\n  \"official_source\": \"ê³µì‹ ë¸”ë¡œê·¸/ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸/GitHub ë“± 1ì°¨ ì†ŒìŠ¤ URL (ëª» ì°¾ìœ¼ë©´ null)\",\n  \"verified\": true ë˜ëŠ” false,\n  \"key_facts\": [\"í•µì‹¬ ì‚¬ì‹¤ 1\", \"í•µì‹¬ ì‚¬ì‹¤ 2\", \"í•µì‹¬ ì‚¬ì‹¤ 3\"],\n  \"corrections\": \"ê¸°ì‚¬ì™€ ë‹¤ë¥¸ ì ì´ ìˆìœ¼ë©´ ê¸°ìˆ , ì—†ìœ¼ë©´ null\",\n  \"tech_details\": \"ê¸°ìˆ ì  í•µì‹¬ ë‚´ìš© ìš”ì•½ (3~5ë¬¸ì¥, í•œêµ­ì–´)\",\n  \"significance\": \"ì™œ ì¤‘ìš”í•œì§€ í•œ ì¤„ í‰ê°€ (í•œêµ­ì–´)\",\n  \"related_tools\": [\"ê´€ë ¨ ë„êµ¬/ì„œë¹„ìŠ¤ëª…\"]\n}\n\nJSON ì™¸ì˜ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.`;\n\nreturn [{ json: { prompt, original: item } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-600, 300],
      "id": "perplexity-prompt-001",
      "name": "Perplexity ì¡°ì‚¬ í”„ë¡¬í”„íŠ¸"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'perplexity/sonar', messages: [{ role: 'system', content: 'AI ê¸°ìˆ  ë‰´ìŠ¤ íŒ©íŠ¸ì²´ì»¤. ë°˜ë“œì‹œ ìš”ì²­ëœ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ë¼.' }, { role: 'user', content: $json.prompt }], temperature: 0.1, max_tokens: 2000 }) }}",
        "options": {
          "timeout": 90000
        }
      },
      "id": "perplexity-001",
      "name": "Perplexity Sonar ì¡°ì‚¬",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [-300, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "cjRbZ8vwW17VCUpg",
          "name": "Openrouter"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\nconst original = $('Perplexity ì¡°ì‚¬ í”„ë¡¬í”„íŠ¸').first().json.original;\n\nlet content = '';\ntry {\n  content = response.choices[0].message.content;\n} catch (e) {\n  return [{ json: { ...original, research: null, research_error: 'LLM ì‘ë‹µ ì—†ìŒ' } }];\n}\n\n// JSON íŒŒì‹±\nlet jsonStr = content;\nconst jsonMatch = content.match(/```json\\s*([\\s\\S]*?)\\s*```/);\nif (jsonMatch) jsonStr = jsonMatch[1];\nconst plainMatch = jsonStr.match(/```\\s*([\\s\\S]*?)\\s*```/);\nif (plainMatch) jsonStr = plainMatch[1];\n\ntry {\n  const research = JSON.parse(jsonStr.trim());\n  return [{ json: { ...original, research } }];\n} catch (e) {\n  return [{ json: { ...original, research: null, research_error: content.slice(0, 500) } }];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [0, 300],
      "id": "perplexity-parse-001",
      "name": "Perplexity ê²°ê³¼ ë³‘í•©"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all().map(item => item.json);\nconst validItems = items.filter(i => !i.skip && i.title !== 'No articles selected');\n\nconst today = new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });\n\nconst articleList = validItems.map((a, i) => {\n  const r = a.research || {};\n  return `[${i+1}] ì œëª©: ${a.title}\n  ì¶œì²˜: ${a.source}\n  ë§í¬: ${a.link}\n  ê³µì‹ì†ŒìŠ¤: ${r.official_source || 'N/A'}\n  ê²€ì¦ì—¬ë¶€: ${r.verified !== undefined ? r.verified : 'N/A'}\n  í•µì‹¬ì‚¬ì‹¤: ${(r.key_facts || []).join(' / ')}\n  ê¸°ìˆ ìƒì„¸: ${r.tech_details || a.snippet}\n  ì¤‘ìš”ë„: ${r.significance || 'N/A'}\n  ìˆ˜ì •ì‚¬í•­: ${r.corrections || 'ì—†ìŒ'}`;\n}).join('\\n\\n');\n\nconst prompt = `ì˜¤ëŠ˜ì€ ${today}ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ AI ë‰´ìŠ¤ íë ˆì´í„°ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” íŒ©íŠ¸ì²´í¬ë¥¼ ê±°ì¹œ ê¸°ì‚¬ ëª©ë¡ì…ë‹ˆë‹¤.\n\n${articleList}\n\n[ì‘ì—… 1: ì „ì²´ ìš”ì•½/ë¶„ë¥˜]\nëª¨ë“  ê¸°ì‚¬ë¥¼ ìš”ì•½í•˜ê³  ë¶„ë¥˜í•˜ì„¸ìš”.\n\n[ë…ì ë ˆë²¨ ë¶„ë¥˜ ê¸°ì¤€]\n- general: ì¼ë°˜ì¸ë„ í¥ë¯¸ë¥¼ ê°€ì§ˆë§Œí•œ ì†Œì‹. ChatGPT, Claude, Midjourney, Suno, Kling ê°™ì€ ëˆ„êµ¬ë‚˜ ì“¸ ìˆ˜ ìˆëŠ” AI ì„œë¹„ìŠ¤/ë„êµ¬ì˜ ì‹ ê·œ ì¶œì‹œ, ì—…ë°ì´íŠ¸, ë°ëª¨. ë°”ì´ë¸Œì½”ë”©, ë…¸ì½”ë“œ AI. ì½”ë”© ì§€ì‹ ì—†ì´ë„ ì´í•´ ê°€ëŠ¥í•œ ë‚´ìš©.\n- intermediate: AIì— ê´€ì‹¬ ë§ê³  n8n, Make ê°™ì€ ìë™í™” ë„êµ¬ë¥¼ í™œìš©í•˜ëŠ” ì‚¬ëŒì´ ê´€ì‹¬ê°€ì§ˆ ì†Œì‹.\n- developer: AI ì—”ì§€ë‹ˆì–´/ê°œë°œì ëŒ€ìƒ. ìƒˆ ëª¨ë¸ ì•„í‚¤í…ì²˜, í•™ìŠµ ê¸°ë²•, í”„ë ˆì„ì›Œí¬, ë²¤ì¹˜ë§ˆí¬, ë…¼ë¬¸ ë“±.\n\n[ì‘ì—… 2: ì“°ë ˆë“œ 8ê°œ ì„ ì •]\nìœ„ ê¸°ì‚¬ ì¤‘ ì“°ë ˆë“œ(Threads) SNSì— ì˜¬ë¦¬ê¸° ì¢‹ì€ ê¸°ì‚¬ 8ê°œë¥¼ ì„ ì •í•˜ì„¸ìš”.\nì„ ì • ê¸°ì¤€:\n- ëŒ€ì¤‘ì˜ ê´€ì‹¬ì„ ëŒ ìˆ˜ ìˆëŠ” ì£¼ì œ ìš°ì„ \n- generalê³¼ developer ì½˜í…ì¸ ë¥¼ ì ì ˆíˆ ì„ì„ ê²ƒ (general 5ê°œ, developer 3ê°œ ì •ë„)\n- íŒ©íŠ¸ì²´í¬ì—ì„œ verified: falseì¸ ê¸°ì‚¬ëŠ” ì œì™¸\n\në°˜ë“œì‹œ ì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”:\n{\n  \"all_stories\": [\n    {\n      \"title\": \"ê¸°ì‚¬ ì œëª©\",\n      \"summary\": \"í•œêµ­ì–´ 2~3ë¬¸ì¥ ìš”ì•½\",\n      \"audience\": \"general | intermediate | developer\",\n      \"category\": \"model_release | tool_update | demo | paper | benchmark | api_change | opensource | creative_ai | automation | vibe_coding | other\",\n      \"link\": \"ì›ë¬¸ ë§í¬\",\n      \"official_source\": \"ê³µì‹ ì†ŒìŠ¤ ë§í¬\",\n      \"key_facts\": [\"í•µì‹¬ ì‚¬ì‹¤ë“¤\"],\n      \"tech_details\": \"ê¸°ìˆ  ìƒì„¸\"\n    }\n  ],\n  \"thread_picks\": [1, 3, 5, 7, 8, 10, 12, 14],\n  \"daily_digest\": \"ì˜¤ëŠ˜ì˜ AI ë‰´ìŠ¤ í•µì‹¬ ìš”ì•½ (í•œêµ­ì–´, 3~5ë¬¸ì¥)\"\n}`;\n\nreturn [{ json: { prompt, articleCount: validItems.length, articles: validItems } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [300, 300],
      "id": "summary-prompt-001",
      "name": "2ì°¨ ìš”ì•½/ë¶„ë¥˜ í”„ë¡¬í”„íŠ¸"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'openai/gpt-4.1-mini', messages: [{ role: 'system', content: 'AI ë‰´ìŠ¤ íë ˆì´í„°. ë°˜ë“œì‹œ ìš”ì²­ëœ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ë¼.' }, { role: 'user', content: $json.prompt }], temperature: 0.3, max_tokens: 4000 }) }}",
        "options": {
          "timeout": 90000
        }
      },
      "id": "llm-summary-001",
      "name": "2ì°¨ ìš”ì•½ LLM (GPT-4.1-mini)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [600, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "cjRbZ8vwW17VCUpg",
          "name": "Openrouter"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\nlet content = '';\n\ntry {\n  content = response.choices[0].message.content;\n} catch (e) {\n  throw new Error('2ì°¨ LLM ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨: ' + JSON.stringify(response).slice(0, 500));\n}\n\nlet jsonStr = content;\nconst jsonMatch = content.match(/```json\\s*([\\s\\S]*?)\\s*```/);\nif (jsonMatch) jsonStr = jsonMatch[1];\nconst plainMatch = jsonStr.match(/```\\s*([\\s\\S]*?)\\s*```/);\nif (plainMatch) jsonStr = plainMatch[1];\n\ntry {\n  const parsed = JSON.parse(jsonStr.trim());\n  return [{ json: parsed }];\n} catch (e) {\n  throw new Error('2ì°¨ JSON íŒŒì‹± ì‹¤íŒ¨. ì›ë³¸: ' + content.slice(0, 1000));\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 300],
      "id": "summary-parse-001",
      "name": "2ì°¨ ìš”ì•½ ê²°ê³¼ íŒŒì‹±"
    },
    {
      "parameters": {
        "jsCode": "const data = $input.first().json;\nconst allStories = data.all_stories || [];\nconst threadPicks = data.thread_picks || [];\n\n// thread_picksì— í•´ë‹¹í•˜ëŠ” ê¸°ì‚¬ë§Œ ì¶”ì¶œ\nconst threadStories = threadPicks\n  .map(idx => allStories[idx - 1])\n  .filter(s => s !== undefined)\n  .slice(0, 8);\n\nreturn threadStories.map((story, i) => ({\n  json: {\n    ...story,\n    thread_index: i + 1,\n    total_threads: threadStories.length\n  }\n}));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1200, 500],
      "id": "thread-select-001",
      "name": "ì“°ë ˆë“œ 8ê°œ ì„ ì •"
    },
    {
      "parameters": {
        "jsCode": "const story = $input.first().json;\n\nconst prompt = `ë‹¹ì‹ ì€ ì“°ë ˆë“œ(Threads) SNS ì „ë¬¸ ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.\nì•„ë˜ ê¸°ì‚¬ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì“°ë ˆë“œ ê²Œì‹œë¬¼ ì´ˆì•ˆì„ ì‘ì„±í•˜ì„¸ìš”.\n\n[ê¸°ì‚¬ ì •ë³´]\nì œëª©: ${story.title}\nìš”ì•½: ${story.summary}\níƒ€ê²Ÿ: ${story.audience}\nì¹´í…Œê³ ë¦¬: ${story.category}\nê³µì‹ì†ŒìŠ¤: ${story.official_source || story.link}\ní•µì‹¬ì‚¬ì‹¤: ${(story.key_facts || []).join(', ')}\nê¸°ìˆ ìƒì„¸: ${story.tech_details || ''}\n\n[ì‘ì„± ê·œì¹™]\n1. í†¤: ìºì£¼ì–¼í•˜ê³  ì¹œê·¼í•˜ê²Œ. \"~ì…ë‹ˆë‹¤\" ë³´ë‹¤ \"~ê±°ë“ ìš”\", \"~ì´ì—ìš”\", \"~ì¸ë°ìš”\" ì‚¬ìš©\n2. ì²« ì¤„ì€ ë°˜ë“œì‹œ ìŠ¤í¬ë¡¤ì„ ë©ˆì¶”ê²Œ í•˜ëŠ” í›…ìœ¼ë¡œ ì‹œì‘ (ì§ˆë¬¸, ë°˜ì „, ê°•í•œ ì£¼ì¥)\n3. ì´ëª¨ì§€ ì ì ˆíˆ ì‚¬ìš© (ê³¼í•˜ì§€ ì•Šê²Œ, 2~4ê°œ)\n4. ì „ì²´ ê¸¸ì´: 300~500ì\n5. ë§ˆì§€ë§‰ì— ê³µì‹ ì†ŒìŠ¤ ë§í¬ í¬í•¨\n6. AI ê°œë°œìì˜ ê´€ì ì—ì„œ ë³¸ì¸ ì˜ê²¬/ì¸ì‚¬ì´íŠ¸ í•œ ì¤„ ë°˜ë“œì‹œ í¬í•¨\n7. í•´ì‹œíƒœê·¸ 2~3ê°œ (ë§ˆì§€ë§‰ ì¤„)\n\n[í†¤ ì˜ˆì‹œ]\n- \"ì†”ì§íˆ ì´ë²ˆì—” ì¢€ ë‹¤ë¦…ë‹ˆë‹¤ ğŸ”¥\"\n- \"ì´ê±° ëª¨ë¥´ë©´ ì§„ì§œ ì†í•´ì˜ˆìš”\"\n- \"ê°œë°œì ì…ì¥ì—ì„œ ë³´ë©´, ì§„ì§œ ë°”ë€ ê±´ ë”± í•˜ë‚˜ì…ë‹ˆë‹¤\"\n\n[audienceë³„ í†¤ ì¡°ì ˆ]\n- general: ë¹„ê°œë°œìë„ ì´í•´í•  ìˆ˜ ìˆê²Œ ì‰½ê³  í¥ë¯¸ë¡­ê²Œ\n- intermediate: ì‹¤ìš©ì  í™œìš©ë²• ì¤‘ì‹¬\n- developer: ê¸°ìˆ ì  ë””í…Œì¼ í¬í•¨, ê°œë°œì ê³µê° ìš”ì†Œ\n\në°˜ë“œì‹œ ì•„ë˜ JSONìœ¼ë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”:\n{\n  \"thread_text\": \"ì“°ë ˆë“œ ê²Œì‹œë¬¼ ì „ë¬¸\",\n  \"hook_line\": \"ì²« ì¤„ í›…ë§Œ ë”°ë¡œ\",\n  \"content_type\": \"ì†ë³´ | ë¦¬ë·° | íŒ | ë¹„êµ | ì˜ê²¬\"\n}`;\n\nreturn [{ json: { prompt, story } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1500, 500],
      "id": "thread-draft-prompt-001",
      "name": "ì“°ë ˆë“œ ì´ˆì•ˆ í”„ë¡¬í”„íŠ¸"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'openai/gpt-4.1-mini', messages: [{ role: 'system', content: 'ì“°ë ˆë“œ SNS ì „ë¬¸ ì¹´í”¼ë¼ì´í„°. ë°˜ë“œì‹œ ìš”ì²­ëœ JSONìœ¼ë¡œë§Œ ì‘ë‹µí•˜ë¼.' }, { role: 'user', content: $json.prompt }], temperature: 0.7, max_tokens: 1500 }) }}",
        "options": {
          "timeout": 60000
        }
      },
      "id": "llm-draft-001",
      "name": "ì´ˆì•ˆ ìƒì„± LLM (GPT-4.1-mini)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1800, 500],
      "credentials": {
        "httpHeaderAuth": {
          "id": "cjRbZ8vwW17VCUpg",
          "name": "Openrouter"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\nconst story = $('ì“°ë ˆë“œ ì´ˆì•ˆ í”„ë¡¬í”„íŠ¸').first().json.story;\n\nlet content = '';\ntry {\n  content = response.choices[0].message.content;\n} catch (e) {\n  return [{ json: { ...story, thread_text: 'ì´ˆì•ˆ ìƒì„± ì‹¤íŒ¨', error: true } }];\n}\n\nlet jsonStr = content;\nconst jsonMatch = content.match(/```json\\s*([\\s\\S]*?)\\s*```/);\nif (jsonMatch) jsonStr = jsonMatch[1];\nconst plainMatch = jsonStr.match(/```\\s*([\\s\\S]*?)\\s*```/);\nif (plainMatch) jsonStr = plainMatch[1];\n\ntry {\n  const draft = JSON.parse(jsonStr.trim());\n  const today = new Date().toISOString().split('T')[0];\n  const draftId = `draft_${today}_${story.thread_index}`;\n\n  return [{\n    json: {\n      draft_id: draftId,\n      title: story.title,\n      summary: story.summary,\n      audience: story.audience,\n      category: story.category,\n      link: story.link,\n      official_source: story.official_source || story.link,\n      key_facts: story.key_facts || [],\n      tech_details: story.tech_details || '',\n      thread_text: draft.thread_text,\n      hook_line: draft.hook_line,\n      content_type: draft.content_type,\n      thread_index: story.thread_index,\n      total_threads: story.total_threads,\n      status: 'draft',\n      date: today\n    }\n  }];\n} catch (e) {\n  return [{ json: { ...story, thread_text: content.slice(0, 500), error: true } }];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2100, 500],
      "id": "draft-parse-001",
      "name": "ì´ˆì•ˆ íŒŒì‹± & ë³‘í•©"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "YOUR_NOTION_DB_ID_HERE",
          "mode": "id"
        },
        "title": "={{ $json.title }}",
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Summary|rich_text",
              "textContent": "={{ $json.summary }}"
            },
            {
              "key": "Category|select",
              "selectValue": "={{ $json.category }}"
            },
            {
              "key": "Link|url",
              "urlValue": "={{ $json.link }}"
            },
            {
              "key": "Date|date",
              "date": "={{ $json.date }}"
            },
            {
              "key": "Audience|select",
              "selectValue": "={{ $json.audience }}"
            },
            {
              "key": "OfficialSource|url",
              "urlValue": "={{ $json.official_source }}"
            },
            {
              "key": "ThreadDraft|rich_text",
              "textContent": "={{ $json.thread_text }}"
            },
            {
              "key": "DraftID|rich_text",
              "textContent": "={{ $json.draft_id }}"
            },
            {
              "key": "Status|select",
              "selectValue": "draft"
            },
            {
              "key": "ContentType|select",
              "selectValue": "={{ $json.content_type }}"
            },
            {
              "key": "TechDetails|rich_text",
              "textContent": "={{ $json.tech_details }}"
            }
          ]
        },
        "options": {}
      },
      "id": "notion-save-001",
      "name": "Notion ì €ì¥ (draft)",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [2400, 300],
      "credentials": {
        "notionApi": {
          "id": "3HIEQPfhjW2SIyxD",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const item = $input.first().json;\nconst draft = $('ì´ˆì•ˆ íŒŒì‹± & ë³‘í•©').first().json;\n\n// Notion ì €ì¥ í›„ ë°˜í™˜ëœ page ID ê°€ì ¸ì˜¤ê¸°\nconst notionPageId = item.id || '';\n\nconst categoryEmoji = {\n  model_release: 'ğŸš€', tool_update: 'ğŸ”§', demo: 'ğŸ¬', paper: 'ğŸ“„',\n  benchmark: 'ğŸ“Š', api_change: 'ğŸ”Œ', opensource: 'ğŸ’»', creative_ai: 'ğŸ¨',\n  automation: 'âš™ï¸', vibe_coding: 'ğŸ¸', other: 'ğŸ“Œ'\n};\n\nconst audienceBadge = {\n  general: 'ğŸ‘¥ ì¼ë°˜', intermediate: 'âš¡ ì¤‘ê°„', developer: 'ğŸ› ï¸ ê°œë°œì'\n};\n\nconst emoji = categoryEmoji[draft.category] || 'ğŸ“Œ';\nconst badge = audienceBadge[draft.audience] || 'ğŸ“Œ';\n\nconst slackBlocks = [\n  {\n    type: 'header',\n    text: {\n      type: 'plain_text',\n      text: `ğŸ¤– ì“°ë ˆë“œ ì´ˆì•ˆ [${draft.thread_index}/${draft.total_threads}]`\n    }\n  },\n  {\n    type: 'context',\n    elements: [\n      { type: 'mrkdwn', text: `${badge} | ${emoji} ${draft.category} | ${draft.content_type}` }\n    ]\n  },\n  { type: 'divider' },\n  {\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: draft.thread_text\n    }\n  },\n  { type: 'divider' },\n  {\n    type: 'context',\n    elements: [\n      { type: 'mrkdwn', text: `ğŸ“ *ì›ë¬¸:* <${draft.link}|ë§í¬> | ğŸ”— *ê³µì‹:* <${draft.official_source || draft.link}|ë§í¬>` }\n    ]\n  },\n  {\n    type: 'actions',\n    block_id: `approve_row1_${draft.draft_id}`,\n    elements: [\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… ì¦‰ì‹œ' }, action_id: `approve_now_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: 'now' }), style: 'primary' },\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… 8ì‹œ' }, action_id: `approve_08_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: '08:00' }) },\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… 10ì‹œ' }, action_id: `approve_10_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: '10:00' }) },\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… 12ì‹œ' }, action_id: `approve_12_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: '12:00' }) },\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… 14ì‹œ' }, action_id: `approve_14_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: '14:00' }) }\n    ]\n  },\n  {\n    type: 'actions',\n    block_id: `approve_row2_${draft.draft_id}`,\n    elements: [\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… 16ì‹œ' }, action_id: `approve_16_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: '16:00' }) },\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… 18ì‹œ' }, action_id: `approve_18_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: '18:00' }) },\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… 20ì‹œ' }, action_id: `approve_20_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: '20:00' }) },\n      { type: 'button', text: { type: 'plain_text', text: 'âœ… 22ì‹œ' }, action_id: `approve_22_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: '22:00' }) },\n      { type: 'button', text: { type: 'plain_text', text: 'âŒ ë°˜ë ¤' }, action_id: `reject_${draft.draft_id}`, value: JSON.stringify({ draft_id: draft.draft_id, notion_page_id: notionPageId, time: 'reject' }), style: 'danger' }\n    ]\n  },\n  {\n    type: 'context',\n    elements: [\n      { type: 'mrkdwn', text: 'ğŸ’¬ ì´ ë©”ì‹œì§€ì— ìŠ¤ë ˆë“œë¡œ í”¼ë“œë°±ì„ ë‚¨ê¸°ë©´ ìˆ˜ì •ë³¸ì„ ë§Œë“¤ì–´ë“œë ¤ìš”' }\n    ]\n  }\n];\n\nreturn [{ json: { blocks: JSON.stringify(slackBlocks), draft_id: draft.draft_id, channel: 'thread-bot' } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2700, 300],
      "id": "slack-format-001",
      "name": "ìŠ¬ë™ ë©”ì‹œì§€ í¬ë§·"
    },
    {
      "parameters": {
        "resource": "message",
        "channel": {
          "__rl": true,
          "value": "YOUR_SLACK_CHANNEL_ID_HERE",
          "mode": "id"
        },
        "blocksUi": "={{ $json.blocks }}",
        "text": "ì“°ë ˆë“œ ì´ˆì•ˆì´ ë„ì°©í–ˆì–´ìš”!",
        "options": {}
      },
      "id": "slack-send-001",
      "name": "ìŠ¬ë™ ì „ì†¡",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [3000, 300],
      "credentials": {
        "slackApi": {
          "id": "YOUR_SLACK_CREDENTIAL_ID",
          "name": "Slack"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const data = $('2ì°¨ ìš”ì•½ ê²°ê³¼ íŒŒì‹±').first().json;\nconst stories = data.all_stories || [];\nconst today = new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });\n\nconst categoryEmoji = {\n  model_release: 'ğŸš€', tool_update: 'ğŸ”§', demo: 'ğŸ¬', paper: 'ğŸ“„',\n  benchmark: 'ğŸ“Š', api_change: 'ğŸ”Œ', opensource: 'ğŸ’»', creative_ai: 'ğŸ¨',\n  automation: 'âš™ï¸', vibe_coding: 'ğŸ¸', other: 'ğŸ“Œ'\n};\n\nconst audienceBadge = { general: 'ğŸ‘¥ ì¼ë°˜', intermediate: 'âš¡ ì¤‘ê°„', developer: 'ğŸ› ï¸ ê°œë°œì' };\nconst audienceColor = { general: '#10b981', intermediate: '#f59e0b', developer: '#6366f1' };\n\nlet html = `<div style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 700px; margin: 0 auto; padding: 20px;\">\n  <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 24px; border-radius: 12px; margin-bottom: 24px;\">\n    <h1 style=\"margin: 0; font-size: 24px;\">ğŸ¤– AI Daily Briefing</h1>\n    <p style=\"margin: 8px 0 0 0; opacity: 0.9;\">${today}</p>\n  </div>\n  <div style=\"background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 24px; border-left: 4px solid #667eea;\">\n    <h3 style=\"margin: 0 0 8px 0; color: #333;\">ğŸ“‹ ì˜¤ëŠ˜ì˜ ìš”ì•½</h3>\n    <p style=\"margin: 0; color: #555; line-height: 1.6;\">${data.daily_digest || 'N/A'}</p>\n  </div>\n  <h2 style=\"color: #333; border-bottom: 2px solid #eee; padding-bottom: 8px;\">ì£¼ìš” ë‰´ìŠ¤ (${stories.length}ê±´)</h2>`;\n\nfor (const story of stories) {\n  const emoji = categoryEmoji[story.category] || 'ğŸ“Œ';\n  const badge = audienceBadge[story.audience] || 'ğŸ“Œ';\n  const color = audienceColor[story.audience] || '#888';\n  html += `<div style=\"background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin-bottom: 12px;\">\n    <div style=\"margin-bottom: 8px;\"><span style=\"font-size: 12px; background: ${color}; color: white; padding: 2px 8px; border-radius: 12px;\">${badge}</span> <span style=\"font-size: 12px; color: #888;\">${emoji} ${story.category || ''}</span></div>\n    <h3 style=\"margin: 0 0 8px 0; font-size: 16px;\"><a href=\"${story.link}\" style=\"color: #2d3748; text-decoration: none;\">${story.title}</a></h3>\n    <p style=\"margin: 0; color: #666; font-size: 14px; line-height: 1.5;\">${story.summary}</p>\n  </div>`;\n}\n\nhtml += `<div style=\"text-align: center; padding: 20px; color: #aaa; font-size: 12px;\">Powered by n8n + OpenRouter | AI Daily News Agent v2</div></div>`;\n\nconst hour = new Date().getHours();\nconst timeSlot = hour < 9 ? 'ğŸŒ… ëª¨ë‹' : hour < 15 ? 'â˜€ï¸ ì ì‹¬' : 'ğŸŒ† ì €ë…';\nconst subject = `[AI Daily] ${today} ${timeSlot} ë¸Œë¦¬í•‘ (${stories.length}ê±´)`;\n\nreturn [{ json: { html, subject, storyCount: stories.length } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1200, 100],
      "id": "email-html-001",
      "name": "Gmail HTML ìƒì„±"
    },
    {
      "parameters": {
        "fromEmail": "changwoo7463@gmail.com",
        "toEmail": "changwoo7463@gmail.com",
        "subject": "={{ $json.subject }}",
        "html": "={{ $json.html }}",
        "options": {}
      },
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [1500, 100],
      "id": "email-send-001",
      "name": "ì´ë©”ì¼ ë°œì†¡",
      "credentials": {
        "smtp": {
          "id": "vcpYCmulz103zq0E",
          "name": "SMTP account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "ì•„ì¹¨ 6ì‹œ íŠ¸ë¦¬ê±°": {
      "main": [
        [
          { "node": "RSS + Tavily ìˆ˜ì§‘", "type": "main", "index": 0 }
        ]
      ]
    },
    "RSS + Tavily ìˆ˜ì§‘": {
      "main": [
        [
          { "node": "ì¤‘ë³µì œê±° & 24h í•„í„°", "type": "main", "index": 0 }
        ]
      ]
    },
    "ì¤‘ë³µì œê±° & 24h í•„í„°": {
      "main": [
        [
          { "node": "1ì°¨ í•„í„° í”„ë¡¬í”„íŠ¸", "type": "main", "index": 0 }
        ]
      ]
    },
    "1ì°¨ í•„í„° í”„ë¡¬í”„íŠ¸": {
      "main": [
        [
          { "node": "1ì°¨ í•„í„° LLM (GPT-4.1-mini)", "type": "main", "index": 0 }
        ]
      ]
    },
    "1ì°¨ í•„í„° LLM (GPT-4.1-mini)": {
      "main": [
        [
          { "node": "1ì°¨ í•„í„° ê²°ê³¼ íŒŒì‹±", "type": "main", "index": 0 }
        ]
      ]
    },
    "1ì°¨ í•„í„° ê²°ê³¼ íŒŒì‹±": {
      "main": [
        [
          { "node": "Perplexity ì¡°ì‚¬ í”„ë¡¬í”„íŠ¸", "type": "main", "index": 0 }
        ]
      ]
    },
    "Perplexity ì¡°ì‚¬ í”„ë¡¬í”„íŠ¸": {
      "main": [
        [
          { "node": "Perplexity Sonar ì¡°ì‚¬", "type": "main", "index": 0 }
        ]
      ]
    },
    "Perplexity Sonar ì¡°ì‚¬": {
      "main": [
        [
          { "node": "Perplexity ê²°ê³¼ ë³‘í•©", "type": "main", "index": 0 }
        ]
      ]
    },
    "Perplexity ê²°ê³¼ ë³‘í•©": {
      "main": [
        [
          { "node": "2ì°¨ ìš”ì•½/ë¶„ë¥˜ í”„ë¡¬í”„íŠ¸", "type": "main", "index": 0 }
        ]
      ]
    },
    "2ì°¨ ìš”ì•½/ë¶„ë¥˜ í”„ë¡¬í”„íŠ¸": {
      "main": [
        [
          { "node": "2ì°¨ ìš”ì•½ LLM (GPT-4.1-mini)", "type": "main", "index": 0 }
        ]
      ]
    },
    "2ì°¨ ìš”ì•½ LLM (GPT-4.1-mini)": {
      "main": [
        [
          { "node": "2ì°¨ ìš”ì•½ ê²°ê³¼ íŒŒì‹±", "type": "main", "index": 0 }
        ]
      ]
    },
    "2ì°¨ ìš”ì•½ ê²°ê³¼ íŒŒì‹±": {
      "main": [
        [
          { "node": "ì“°ë ˆë“œ 8ê°œ ì„ ì •", "type": "main", "index": 0 },
          { "node": "Gmail HTML ìƒì„±", "type": "main", "index": 0 }
        ]
      ]
    },
    "ì“°ë ˆë“œ 8ê°œ ì„ ì •": {
      "main": [
        [
          { "node": "ì“°ë ˆë“œ ì´ˆì•ˆ í”„ë¡¬í”„íŠ¸", "type": "main", "index": 0 }
        ]
      ]
    },
    "ì“°ë ˆë“œ ì´ˆì•ˆ í”„ë¡¬í”„íŠ¸": {
      "main": [
        [
          { "node": "ì´ˆì•ˆ ìƒì„± LLM (GPT-4.1-mini)", "type": "main", "index": 0 }
        ]
      ]
    },
    "ì´ˆì•ˆ ìƒì„± LLM (GPT-4.1-mini)": {
      "main": [
        [
          { "node": "ì´ˆì•ˆ íŒŒì‹± & ë³‘í•©", "type": "main", "index": 0 }
        ]
      ]
    },
    "ì´ˆì•ˆ íŒŒì‹± & ë³‘í•©": {
      "main": [
        [
          { "node": "Notion ì €ì¥ (draft)", "type": "main", "index": 0 }
        ]
      ]
    },
    "Notion ì €ì¥ (draft)": {
      "main": [
        [
          { "node": "ìŠ¬ë™ ë©”ì‹œì§€ í¬ë§·", "type": "main", "index": 0 }
        ]
      ]
    },
    "ìŠ¬ë™ ë©”ì‹œì§€ í¬ë§·": {
      "main": [
        [
          { "node": "ìŠ¬ë™ ì „ì†¡", "type": "main", "index": 0 }
        ]
      ]
    },
    "Gmail HTML ìƒì„±": {
      "main": [
        [
          { "node": "ì´ë©”ì¼ ë°œì†¡", "type": "main", "index": 0 }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "tags": [
    { "name": "threads-auto-publisher" },
    { "name": "ai-news" }
  ]
}